import{_ as ct}from"./_plugin-vue_export-helper-DRcqrMy4.js";/* empty css                   *//* empty css                    *//* empty css                  *//* empty css               *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                  *//* empty css                  */import{r as p,J as dt,o as pt,C as k,D as vt,b as l,x as h,d as a,g as n,w as u,q as _t,t as r,v as _,E as mt,j as c,i as ft,F as b,B as w,K as ht,a as gt,h as m,f as yt,A as o,G as kt,M as bt,N as wt,L as At,e as Ct,T as zt,U as Dt}from"./index-COpeM2_A.js";import{W as Pt}from"./WorkCard-BKm7B0rv.js";import{a as xt,b as Bt,c as Et,d as Nt,e as Tt,f as It}from"./author-CZ4S9Kiu.js";import{f as Mt}from"./follow-CR6HAcdU.js";const jt={class:"author-detail-page page-container"},Ft={key:0,class:"author-profile card"},Vt={class:"profile-header"},Lt={class:"profile-info"},Ut={class:"author-name"},Wt={key:0,class:"author-org"},Yt={key:1},Ot={key:1,class:"author-email"},Rt={key:2,class:"author-orcid"},$t={class:"profile-actions"},St={key:0,class:"profile-fields"},qt={class:"fields-list"},Gt={class:"profile-stats"},Ht={class:"stat-item"},Jt={class:"stat-value"},Kt={class:"stat-item"},Qt={class:"stat-value"},Xt={class:"stat-item"},Zt={class:"stat-value"},te={key:1,class:"author-tabs card"},ee={class:"tab-content"},ae={key:0,class:"works-list"},se={class:"tab-content"},oe={key:0,class:"coauthors-list"},le=["onClick"],ne={class:"coauthor-info"},re={class:"coauthor-count"},ue={class:"count"},ie={class:"tab-content"},ce={key:0,class:"patents-list"},de={class:"tab-content"},pe={key:0,class:"awards-list"},ve={class:"tab-content"},_e={key:0,class:"projects-list"},me={__name:"AuthorDetail",setup(fe){const g=gt(),O=yt(),T=p(!1),d=p(!1),i=p(null),I=p("works"),P=p([]),M=p(1),A=p(0),x=p([]),j=p(1),C=p(0),B=p([]),E=p([]),N=p([]),R=async()=>{T.value=!0;try{const e=await xt(g.params.id);i.value=e.data}catch(e){console.error("获取学者信息失败",e)}finally{T.value=!1}},F=async()=>{var e,t;d.value=!0;try{const v=await Bt(g.params.id,{page:M.value,size:10});P.value=((e=v.data)==null?void 0:e.list)||[],A.value=((t=v.data)==null?void 0:t.total)||0}catch(v){console.error("获取著作失败",v)}finally{d.value=!1}},V=async()=>{var e,t;d.value=!0;try{const v=await Et(g.params.id,{page:j.value,size:12});x.value=((e=v.data)==null?void 0:e.list)||[],C.value=((t=v.data)==null?void 0:t.total)||0}catch(v){console.error("获取合著者失败",v)}finally{d.value=!1}},$=async()=>{var e;d.value=!0;try{const t=await It(g.params.id,{page:1,size:20});B.value=((e=t.data)==null?void 0:e.list)||[]}catch(t){console.error("获取专利失败",t)}finally{d.value=!1}},S=async()=>{var e;d.value=!0;try{const t=await Tt(g.params.id,{page:1,size:20});E.value=((e=t.data)==null?void 0:e.list)||[]}catch(t){console.error("获取奖项失败",t)}finally{d.value=!1}},q=async()=>{var e;d.value=!0;try{const t=await Nt(g.params.id,{page:1,size:20});N.value=((e=t.data)==null?void 0:e.list)||[]}catch(t){console.error("获取项目失败",t)}finally{d.value=!1}},G=async()=>{try{await Mt({idTo:g.params.id,type:"author"}),Dt.success("关注成功")}catch(e){console.error("关注失败",e)}},H=e=>e?typeof e=="string"?e:Array.isArray(e)?e.map(t=>t.name||t).join("; "):"":"",J=e=>e?typeof e=="string"?e.split(/[;；,，]/).map(t=>t.trim()).filter(Boolean):Array.isArray(e)?e.map(t=>t.name||t):[]:[],K=e=>e?e>=1e4?(e/1e4).toFixed(1)+"w":e>=1e3?(e/1e3).toFixed(1)+"k":e:0,L=e=>e?zt(e).format("YYYY-MM-DD"):"未知",Q=e=>e==="授权"?"success":e==="申请中"?"warning":"info";return dt(I,e=>{switch(e){case"works":!P.value.length&&A.value>0&&F();break;case"coauthors":!x.value.length&&C.value>0&&V();break;case"patents":B.value.length||$();break;case"awards":E.value.length||S();break;case"projects":N.value.length||q();break}}),pt(()=>{R(),F(),V()}),(e,t)=>{const v=_t,X=m("OfficeBuilding"),f=mt,Z=m("router-link"),tt=m("Message"),et=m("Link"),at=m("Plus"),st=ft,W=kt,ot=m("Document"),z=wt,Y=At,D=bt,lt=m("Connection"),nt=m("Medal"),rt=m("Trophy"),ut=m("Briefcase"),it=ht,y=vt;return k((o(),l("div",jt,[i.value?(o(),l("div",Ft,[a("div",Vt,[n(v,{size:100,src:i.value.avatar},{default:u(()=>{var s;return[c(r((s=i.value.name)==null?void 0:s.charAt(0)),1)]}),_:1},8,["src"]),a("div",Lt,[a("h1",Ut,r(i.value.name),1),i.value.organizationName?(o(),l("p",Wt,[n(f,null,{default:u(()=>[n(X)]),_:1}),i.value.organizationId?(o(),_(Z,{key:0,to:`/institutions/${i.value.organizationId}`},{default:u(()=>[c(r(i.value.organizationName),1)]),_:1},8,["to"])):(o(),l("span",Yt,r(i.value.organizationName),1))])):h("",!0),i.value.email?(o(),l("p",Ot,[n(f,null,{default:u(()=>[n(tt)]),_:1}),c(" "+r(i.value.email),1)])):h("",!0),i.value.orcid?(o(),l("p",Rt,[n(f,null,{default:u(()=>[n(et)]),_:1}),c(" ORCID: "+r(i.value.orcid),1)])):h("",!0)]),a("div",$t,[n(st,{type:"primary",onClick:G},{default:u(()=>[n(f,null,{default:u(()=>[n(at)]),_:1}),t[3]||(t[3]=c(" 关注 ",-1))]),_:1})])]),H(i.value.fields)?(o(),l("div",St,[t[4]||(t[4]=a("h4",null,"研究领域",-1)),a("div",qt,[(o(!0),l(b,null,w(J(i.value.fields),s=>(o(),_(W,{key:s},{default:u(()=>[c(r(s),1)]),_:2},1024))),128))])])):h("",!0),a("div",Gt,[a("div",Ht,[a("span",Jt,r(i.value.hIndex||i.value.hindex||0),1),t[5]||(t[5]=a("span",{class:"stat-label"},"H指数",-1))]),a("div",Kt,[a("span",Qt,r(i.value.worksCount||0),1),t[6]||(t[6]=a("span",{class:"stat-label"},"著作数量",-1))]),a("div",Xt,[a("span",Zt,r(K(i.value.cited)),1),t[7]||(t[7]=a("span",{class:"stat-label"},"总引用数",-1))])])])):h("",!0),i.value?(o(),l("div",te,[n(it,{modelValue:I.value,"onUpdate:modelValue":t[2]||(t[2]=s=>I.value=s)},{default:u(()=>[n(D,{label:"著作",name:"works"},{label:u(()=>[a("span",null,[n(f,null,{default:u(()=>[n(ot)]),_:1}),c(" 著作 ("+r(A.value)+")",1)])]),default:u(()=>[k((o(),l("div",ee,[P.value.length?(o(),l("div",ae,[(o(!0),l(b,null,w(P.value,s=>(o(),_(Pt,{key:s.workId,work:s},null,8,["work"]))),128))])):(o(),_(z,{key:1,description:"暂无著作"})),A.value>10?(o(),_(Y,{key:2,"current-page":M.value,"onUpdate:currentPage":t[0]||(t[0]=s=>M.value=s),"page-size":10,total:A.value,layout:"total, prev, pager, next, jumper",background:"",onCurrentChange:F},null,8,["current-page","total"])):h("",!0)])),[[y,d.value]])]),_:1}),n(D,{label:"合著者",name:"coauthors"},{label:u(()=>[a("span",null,[n(f,null,{default:u(()=>[n(lt)]),_:1}),c(" 合著者 ("+r(C.value)+")",1)])]),default:u(()=>[k((o(),l("div",se,[x.value.length?(o(),l("div",oe,[(o(!0),l(b,null,w(x.value,s=>(o(),l("div",{class:"coauthor-item card",key:s.coauthorId,onClick:U=>Ct(O).push(`/authors/${s.coauthorId}`)},[n(v,{size:48},{default:u(()=>{var U;return[c(r((U=s.name)==null?void 0:U.charAt(0)),1)]}),_:2},1024),a("div",ne,[a("h4",null,r(s.name),1),a("p",null,r(s.organizationName||"暂无机构信息"),1)]),a("div",re,[a("span",ue,r(s.count),1),t[8]||(t[8]=a("span",{class:"label"},"次合作",-1))])],8,le))),128))])):(o(),_(z,{key:1,description:"暂无合著者"})),C.value>12?(o(),_(Y,{key:2,"current-page":j.value,"onUpdate:currentPage":t[1]||(t[1]=s=>j.value=s),"page-size":12,total:C.value,layout:"total, prev, pager, next, jumper",background:"",onCurrentChange:V},null,8,["current-page","total"])):h("",!0)])),[[y,d.value]])]),_:1}),n(D,{label:"专利",name:"patents"},{label:u(()=>[a("span",null,[n(f,null,{default:u(()=>[n(nt)]),_:1}),t[9]||(t[9]=c(" 专利",-1))])]),default:u(()=>[k((o(),l("div",ie,[B.value.length?(o(),l("div",ce,[(o(!0),l(b,null,w(B.value,s=>(o(),l("div",{class:"patent-item card",key:s.id},[a("h4",null,r(s.name),1),a("p",null,[t[10]||(t[10]=a("span",{class:"label"},"申请号：",-1)),c(r(s.applicationNumber),1)]),a("p",null,[t[11]||(t[11]=a("span",{class:"label"},"申请人：",-1)),c(r(s.applicant),1)]),n(W,{type:Q(s.status)},{default:u(()=>[c(r(s.status),1)]),_:2},1032,["type"])]))),128))])):(o(),_(z,{key:1,description:"暂无专利"}))])),[[y,d.value]])]),_:1}),n(D,{label:"奖项",name:"awards"},{label:u(()=>[a("span",null,[n(f,null,{default:u(()=>[n(rt)]),_:1}),t[12]||(t[12]=c(" 奖项",-1))])]),default:u(()=>[k((o(),l("div",de,[E.value.length?(o(),l("div",pe,[(o(!0),l(b,null,w(E.value,s=>(o(),l("div",{class:"award-item card",key:s.id},[a("h4",null,r(s.title),1),a("p",null,[t[13]||(t[13]=a("span",{class:"label"},"颁发机构：",-1)),c(r(s.issuer),1)]),a("p",null,[t[14]||(t[14]=a("span",{class:"label"},"颁发日期：",-1)),c(r(L(s.awardDate)),1)])]))),128))])):(o(),_(z,{key:1,description:"暂无奖项"}))])),[[y,d.value]])]),_:1}),n(D,{label:"项目",name:"projects"},{label:u(()=>[a("span",null,[n(f,null,{default:u(()=>[n(ut)]),_:1}),t[15]||(t[15]=c(" 项目",-1))])]),default:u(()=>[k((o(),l("div",ve,[N.value.length?(o(),l("div",_e,[(o(!0),l(b,null,w(N.value,s=>(o(),l("div",{class:"project-item card",key:s.id},[a("h4",null,r(s.projectName),1),a("p",null,[t[16]||(t[16]=a("span",{class:"label"},"主持人：",-1)),c(r(s.host),1)]),a("p",null,[t[17]||(t[17]=a("span",{class:"label"},"资助机构：",-1)),c(r(s.fundingAgency),1)]),a("p",null,[t[18]||(t[18]=a("span",{class:"label"},"时间：",-1)),c(r(L(s.startDate))+" - "+r(L(s.endDate)),1)])]))),128))])):(o(),_(z,{key:1,description:"暂无项目"}))])),[[y,d.value]])]),_:1})]),_:1},8,["modelValue"])])):h("",!0)])),[[y,T.value]])}}},Te=ct(me,[["__scopeId","data-v-ed9a6e2f"]]);export{Te as default};
