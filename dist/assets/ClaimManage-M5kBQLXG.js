import{_ as j}from"./_plugin-vue_export-helper-DRcqrMy4.js";/* empty css                   *//* empty css                  *//* empty css               *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  */import{e as z,f as N,h as Y}from"./application-CxleYuOl.js";import{r,o as P,b as c,d as U,C as A,x as F,g as t,w as s,Q as H,D as L,v as $,L as G,a4 as O,A as i,S as Q,a5 as R,j as p,t as y,T as q,G as J,F as K,i as W,a6 as h,U as C}from"./index-COpeM2_A.js";const X={class:"claim-manage card"},Z={class:"filter-bar"},ee={key:1,class:"processed"},ae={key:0,class:"pagination-wrapper"},g=20,te={__name:"ClaimManage",setup(oe){const u=r(!1),v=r([]),d=r(0),m=r(1),_=r(null),f=async()=>{var e,a;u.value=!0;try{const l=await z({page:m.value,size:g,status:_.value});v.value=((e=l.data)==null?void 0:e.list)||[],d.value=((a=l.data)==null?void 0:a.total)||0}catch(l){console.error("获取认领列表失败",l)}finally{u.value=!1}},w=async e=>{try{await h.confirm("确定通过该成果认领申请吗？","确认"),await N(e.cid),C.success("已通过"),e.status=1}catch(a){a!=="cancel"&&console.error("操作失败",a)}},k=async e=>{try{await h.confirm("确定拒绝该成果认领申请吗？","确认"),await Y(e.cid),C.success("已拒绝"),e.status=2}catch(a){a!=="cancel"&&console.error("操作失败",a)}},x=e=>e===0?"warning":e===1?"success":"danger",D=e=>e===0?"待处理":e===1?"已通过":"已拒绝",E=e=>e?q(e).format("YYYY-MM-DD HH:mm"):"-";return P(()=>{f()}),(e,a)=>{const l=Q,M=H,n=R,T=J,b=W,V=O,B=G,S=L;return i(),c("div",X,[U("div",Z,[t(M,{modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=o=>_.value=o),placeholder:"筛选状态",clearable:"",onChange:f},{default:s(()=>[t(l,{label:"待处理",value:0}),t(l,{label:"已通过",value:1}),t(l,{label:"已拒绝",value:2})]),_:1},8,["modelValue"])]),A((i(),$(V,{data:v.value,border:"",stripe:""},{default:s(()=>[t(n,{prop:"cid",label:"认领ID",width:"80"}),t(n,{prop:"uid",label:"用户ID",width:"100"}),t(n,{prop:"workId",label:"著作ID"}),t(n,{prop:"reason",label:"认领理由","show-overflow-tooltip":""}),t(n,{prop:"time",label:"申请时间",width:"160"},{default:s(({row:o})=>[p(y(E(o.time)),1)]),_:1}),t(n,{prop:"status",label:"状态",width:"100"},{default:s(({row:o})=>[t(T,{type:x(o.status)},{default:s(()=>[p(y(D(o.status)),1)]),_:2},1032,["type"])]),_:1}),t(n,{label:"操作",width:"180",fixed:"right"},{default:s(({row:o})=>[o.status===0?(i(),c(K,{key:0},[t(b,{type:"success",size:"small",onClick:I=>w(o)},{default:s(()=>[...a[2]||(a[2]=[p("通过",-1)])]),_:1},8,["onClick"]),t(b,{type:"danger",size:"small",onClick:I=>k(o)},{default:s(()=>[...a[3]||(a[3]=[p("拒绝",-1)])]),_:1},8,["onClick"])],64)):(i(),c("span",ee,"已处理"))]),_:1})]),_:1},8,["data"])),[[S,u.value]]),d.value>g?(i(),c("div",ae,[t(B,{"current-page":m.value,"onUpdate:currentPage":a[1]||(a[1]=o=>m.value=o),"page-size":g,total:d.value,layout:"prev, pager, next",background:"",onCurrentChange:f},null,8,["current-page","total"])])):F("",!0)])}}},ve=j(te,[["__scopeId","data-v-01bfa53c"]]);export{ve as default};
