import{_ as I}from"./_plugin-vue_export-helper-DRcqrMy4.js";/* empty css                   *//* empty css                    *//* empty css                 *//* empty css                  *//* empty css                  */import{g as M,u as A,a as T}from"./follow-CR6HAcdU.js";import{r as d,J as D,o as L,b as s,d as t,g as r,w as c,K as U,A as o,M as j,C as b,v as k,x as E,F,B as V,q,j as m,t as i,i as J,N as K,D as P,U as S}from"./index-COpeM2_A.js";const $={class:"follows-page card"},G={class:"follows-list"},H={class:"follow-info"},O={class:"fans-list"},Q={class:"follow-info"},R={__name:"Follows",setup(W){const _=d("follows"),p=d(!1),v=d(!1),u=d([]),f=d([]),x=async()=>{var l;p.value=!0;try{const a=await M({page:1,size:50});u.value=((l=a.data)==null?void 0:l.list)||[]}catch(a){console.error("获取关注列表失败",a)}finally{p.value=!1}},z=async()=>{var l;v.value=!0;try{const a=await T({page:1,size:50});f.value=((l=a.data)==null?void 0:l.list)||[]}catch(a){console.error("获取粉丝列表失败",a)}finally{v.value=!1}},B=async l=>{try{await A(l.followId),S.success("已取消关注"),u.value=u.value.filter(a=>a.followId!==l.followId)}catch(a){console.error("取消关注失败",a)}};return D(_,l=>{l==="fans"&&!f.value.length&&z()}),L(()=>{x()}),(l,a)=>{const w=q,N=J,g=K,y=j,C=U,h=P;return o(),s("div",$,[a[2]||(a[2]=t("h2",{class:"page-title"},"我的关注",-1)),r(C,{modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=e=>_.value=e)},{default:c(()=>[r(y,{label:"我关注的",name:"follows"},{default:c(()=>[b((o(),s("div",G,[(o(!0),s(F,null,V(u.value,e=>(o(),s("div",{class:"follow-item",key:e.followId},[r(w,{size:48},{default:c(()=>{var n;return[m(i((n=e.name)==null?void 0:n.charAt(0)),1)]}),_:2},1024),t("div",H,[t("h4",null,i(e.name),1),t("p",null,i(e.organizationName||e.type),1)]),r(N,{type:"danger",plain:"",size:"small",onClick:n=>B(e)},{default:c(()=>[...a[1]||(a[1]=[m(" 取消关注 ",-1)])]),_:1},8,["onClick"])]))),128)),u.value.length?E("",!0):(o(),k(g,{key:0,description:"暂无关注"}))])),[[h,p.value]])]),_:1}),r(y,{label:"我的粉丝",name:"fans"},{default:c(()=>[b((o(),s("div",O,[(o(!0),s(F,null,V(f.value,e=>(o(),s("div",{class:"follow-item",key:e.uid},[r(w,{size:48},{default:c(()=>{var n;return[m(i((n=e.nickname)==null?void 0:n.charAt(0)),1)]}),_:2},1024),t("div",Q,[t("h4",null,i(e.nickname),1),t("p",null,i(e.fields||"暂无信息"),1)])]))),128)),f.value.length?E("",!0):(o(),k(g,{key:0,description:"暂无粉丝"}))])),[[h,v.value]])]),_:1})]),_:1},8,["modelValue"])])}}},ta=I(R,[["__scopeId","data-v-b3ab0c80"]]);export{ta as default};
