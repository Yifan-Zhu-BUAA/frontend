import{_ as F}from"./_plugin-vue_export-helper-DRcqrMy4.js";/* empty css                   *//* empty css                  *//* empty css               *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                     *//* empty css                  */import{r,O as I,J as L,o as M,b as m,d,C as N,g as t,w as s,P,D as j,v as E,x as K,t as O,Q as R,F as T,B as A,L as J,h as Q,A as i,R as q,l as G,k as H,S as X,W as Z,i as $,j as x,E as ee,N as te}from"./index-COpeM2_A.js";import{W as le}from"./WorkCard-BKm7B0rv.js";import{g as ae}from"./work-CbuoV90x.js";const oe={class:"work-list-page page-container"},se={class:"filter-section card"},ne={class:"work-list"},re={class:"list-header"},ie={class:"total"},pe={key:0,class:"work-grid"},ue={key:2,class:"pagination-wrapper"},de={__name:"WorkList",setup(ce){const y=r(!1),f=r([]),_=r(0),c=r(1),k=r(12),v=r(""),p=r([]),n=I({keyword:"",type:""}),u=async()=>{var w,e,g;y.value=!0;try{const a={keyword:n.keyword,type:n.type,sort:v.value,page:c.value,size:k.value};((w=p.value)==null?void 0:w.length)===2&&(a.publishStart=p.value[0],a.publishEnd=p.value[1]);const o=await ae(a);f.value=((e=o.data)==null?void 0:e.list)||[],_.value=((g=o.data)==null?void 0:g.total)||0}catch(a){console.error("获取著作列表失败",a)}finally{y.value=!1}},h=()=>{c.value=1,u()},C=()=>{n.keyword="",n.type="",p.value=[],c.value=1,u()};return L(v,()=>{u()}),M(()=>{u()}),(w,e)=>{const g=G,a=q,o=X,b=R,S=Z,z=Q("Search"),D=ee,V=$,Y=P,B=te,W=J,U=j;return i(),m("div",oe,[e[8]||(e[8]=d("div",{class:"page-header"},[d("h1",null,"著作列表"),d("p",null,"探索学术论文、书籍等学术成果")],-1)),d("div",se,[t(Y,{inline:!0,model:n},{default:s(()=>[t(a,{label:"关键词"},{default:s(()=>[t(g,{modelValue:n.keyword,"onUpdate:modelValue":e[0]||(e[0]=l=>n.keyword=l),placeholder:"搜索标题/摘要/关键词",clearable:"",style:{width:"200px"},onKeyup:H(h,["enter"])},null,8,["modelValue"])]),_:1}),t(a,{label:"类型"},{default:s(()=>[t(b,{modelValue:n.type,"onUpdate:modelValue":e[1]||(e[1]=l=>n.type=l),placeholder:"全部类型",clearable:"",style:{width:"120px"}},{default:s(()=>[t(o,{label:"论文",value:"paper"}),t(o,{label:"书籍",value:"book"}),t(o,{label:"期刊文章",value:"journal-article"}),t(o,{label:"会议论文",value:"conference"})]),_:1},8,["modelValue"])]),_:1}),t(a,{label:"发表时间"},{default:s(()=>[t(S,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=l=>p.value=l),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"240px"}},null,8,["modelValue"])]),_:1}),t(a,null,{default:s(()=>[t(V,{type:"primary",onClick:h},{default:s(()=>[t(D,null,{default:s(()=>[t(z)]),_:1}),e[6]||(e[6]=x(" 搜索 ",-1))]),_:1}),t(V,{onClick:C},{default:s(()=>[...e[7]||(e[7]=[x("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),N((i(),m("div",ne,[d("div",re,[d("span",ie,"共 "+O(_.value)+" 篇著作",1),t(b,{modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=l=>v.value=l),placeholder:"排序方式",style:{width:"160px"}},{default:s(()=>[t(o,{label:"默认排序",value:""}),t(o,{label:"最新发表",value:"publishTime"}),t(o,{label:"引用最多",value:"cited"})]),_:1},8,["modelValue"])]),f.value.length?(i(),m("div",pe,[(i(!0),m(T,null,A(f.value,l=>(i(),E(le,{key:l.workId,work:l},null,8,["work"]))),128))])):(i(),E(B,{key:1,description:"暂无数据"})),_.value>0?(i(),m("div",ue,[t(W,{"current-page":c.value,"onUpdate:currentPage":e[4]||(e[4]=l=>c.value=l),"page-size":k.value,"onUpdate:pageSize":e[5]||(e[5]=l=>k.value=l),total:_.value,"page-sizes":[12,24,48],layout:"total, sizes, prev, pager, next, jumper",background:"",onSizeChange:u,onCurrentChange:u},null,8,["current-page","page-size","total"])])):K("",!0)])),[[U,y.value]])])}}},Ce=F(de,[["__scopeId","data-v-3c6d921f"]]);export{Ce as default};
