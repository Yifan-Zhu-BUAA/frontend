import{_ as N}from"./_plugin-vue_export-helper-DRcqrMy4.js";/* empty css                   *//* empty css                  *//* empty css               *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  */import{b as S,d as j,r as z}from"./application-CxleYuOl.js";import{r,o as Y,b as c,d as P,C as U,x as F,g as t,w as s,Q as H,D as L,v as $,L as G,a4 as O,A as i,S as Q,a5 as R,j as p,t as y,T as q,G as J,F as K,i as W,a6 as h,U as k}from"./index-COpeM2_A.js";const X={class:"application-manage card"},Z={class:"filter-bar"},aa={key:1,class:"processed"},ea={key:0,class:"pagination-wrapper"},f=20,ta={__name:"ApplicationManage",setup(oa){const u=r(!1),v=r([]),d=r(0),m=r(1),_=r(null),g=async()=>{var a,e;u.value=!0;try{const l=await S({page:m.value,size:f,status:_.value});v.value=((a=l.data)==null?void 0:a.list)||[],d.value=((e=l.data)==null?void 0:e.total)||0}catch(l){console.error("获取申请列表失败",l)}finally{u.value=!1}},C=async a=>{try{await h.confirm("确定通过该学者认证申请吗？","确认"),await j(a.applicationId),k.success("已通过"),a.status=1}catch(e){e!=="cancel"&&console.error("操作失败",e)}},w=async a=>{try{await h.confirm("确定拒绝该学者认证申请吗？","确认"),await z(a.applicationId),k.success("已拒绝"),a.status=2}catch(e){e!=="cancel"&&console.error("操作失败",e)}},x=a=>a===0?"warning":a===1?"success":"danger",E=a=>a===0?"待处理":a===1?"已通过":"已拒绝",D=a=>a?q(a).format("YYYY-MM-DD HH:mm"):"-";return Y(()=>{g()}),(a,e)=>{const l=Q,T=H,n=R,A=J,b=W,M=O,V=G,B=L;return i(),c("div",X,[P("div",Z,[t(T,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=o=>_.value=o),placeholder:"筛选状态",clearable:"",onChange:g},{default:s(()=>[t(l,{label:"待处理",value:0}),t(l,{label:"已通过",value:1}),t(l,{label:"已拒绝",value:2})]),_:1},8,["modelValue"])]),U((i(),$(M,{data:v.value,border:"",stripe:""},{default:s(()=>[t(n,{prop:"applicationId",label:"申请ID",width:"80"}),t(n,{prop:"uid",label:"用户ID",width:"100"}),t(n,{prop:"authorName",label:"学者姓名"}),t(n,{prop:"institutionName",label:"机构"}),t(n,{prop:"field",label:"研究领域"}),t(n,{prop:"applicationTime",label:"申请时间",width:"160"},{default:s(({row:o})=>[p(y(D(o.applicationTime)),1)]),_:1}),t(n,{prop:"status",label:"状态",width:"100"},{default:s(({row:o})=>[t(A,{type:x(o.status)},{default:s(()=>[p(y(E(o.status)),1)]),_:2},1032,["type"])]),_:1}),t(n,{label:"操作",width:"180",fixed:"right"},{default:s(({row:o})=>[o.status===0?(i(),c(K,{key:0},[t(b,{type:"success",size:"small",onClick:I=>C(o)},{default:s(()=>[...e[2]||(e[2]=[p("通过",-1)])]),_:1},8,["onClick"]),t(b,{type:"danger",size:"small",onClick:I=>w(o)},{default:s(()=>[...e[3]||(e[3]=[p("拒绝",-1)])]),_:1},8,["onClick"])],64)):(i(),c("span",aa,"已处理"))]),_:1})]),_:1},8,["data"])),[[B,u.value]]),d.value>f?(i(),c("div",ea,[t(V,{"current-page":m.value,"onUpdate:currentPage":e[1]||(e[1]=o=>m.value=o),"page-size":f,total:d.value,layout:"prev, pager, next",background:"",onCurrentChange:g},null,8,["current-page","total"])])):F("",!0)])}}},va=N(ta,[["__scopeId","data-v-17bda762"]]);export{va as default};
